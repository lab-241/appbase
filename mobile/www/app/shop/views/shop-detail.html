<ion-view view-title="{{ 'SHOP_DETAIL_VIEW_TITLE' | translate }}">
  <ion-content class="shop-detail">
    <div class="hero">
      <div class="picture" ng-style="{'background-image':'url('+shop.image+')'}"></div>
      <div class="content">
        <h4 class="title">{{shop.name}}</h4>
        <h4><rate-bar rate="shop.globalNote"></rate-bar><h4>
        <div class="buttons">
          <button class="button button-outline button-light icon ion-ios-chatboxes" ng-click="addReview()">
            {{shop.nbReviews}} {{'REVIEWS' | translate}}
          </button>
          <button ng-class="{'favorite': isFavorite}" class="button button-outline button-light icon ion-android-favorite" ng-click="toggleFavorite()">
            {{shop.nbLikes}}
          </button>
        </div>
      </div>
    </div>
    <div class="padding">
      <p class="desc">{{shop.desc | limitTo : 255 }}</p>
    </div>

    <h5 class="subtitle" ng-show="reviews.length">{{'LAST_REVIEWS' | translate}}</h5>
    <h5 class="subtitle" ng-hide="reviews.length">{{'NO_REVIEWS' | translate}}</h5>
    <div ng-hide="reviews.length" class="padding">
      <button class="button button-small button-outline icon-left ion-chatbubble button-calm" ng-click="addReview()">
        {{'ADD_FIRST_REVIEW' | translate}}
      </button>
    </div>
    <div class="list list-inset review-list">
      <a class="item" ng-repeat="review in reviews" ng-click="showReview(review)">
        <div class="row head">
          <p class="col col-75">
            <i class="icon ion-chatbubble-working chat"></i>
            <h4 class="text-calm">{{review.date|date:'dd/MM/yyyy'}} - {{review.reviewer.username}}</h4>
          </p>
          <p class="col" ng-include="'app/shop/views/review-rate-tpl.html'"></p>
        </div>
        <p class="comments">{{review.comments}}</p>
      </a>
    </div>

    <div class="padding" ng-show="reviews.length >= nbLastReviews">
      <a class="button button-small button-outline button-calm" href="#/app/shops/{{shopId}}/reviews">
        {{'MORE_REVIEWS' | translate}}
      </a>
    </div>

  </ion-content>
</ion-view>
